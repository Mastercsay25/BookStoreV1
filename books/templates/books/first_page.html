{% extends "book_store/basic.html" %}

{% block title %} Listing {% endblock %}



{% load static %}



{% block content%}

<div style="margin-top:5%" class="d-flex flex-column">



    <form class="float-left form-inline" action="{% url 'books:index-search' %}" method="get">
        {% csrf_token %}

        <div class="form-group">


            <label id="SearchButton" for="Search_Id" class="text-info mr-2" type="submit">
                <i class="fas fa-search "> </i> </label>

            <div class="SearchBox custom-selection">

                <select class="" name="searchtarget" id="Search_Target">

                    <option class="" value="title">

                        title
                    </option>


                    <option value="author">

                        author
                    </option>



                </select>


                <input class="text-secondary  " name="search" type="text" id="Search_Id">

            </div>

        </div>

    </form>




    <div style="margin-top:1%" class="row bg-primary w-100 mx-auto">
        <div style="font-size:1.5rem" class="text-light text-center col-12 mb-2"> filter by genre </div>

        <div class='mx-1 col-1'> <a class='text-light' href='{% url 'books:search-nav' 'nov' %}'> Novel </a> </div>
        <div class='mx-1 col-1'> <a class='text-light' href='{% url 'books:search-nav' 'cla' %}'> Classic </a> </div>

        <div class='mx-1 col-1'> <a class='text-light' href='{% url 'books:search-nav' 'dra' %}'> Drama </a> </div>
        <div class='mx-1 col-1'> <a class='text-light' href='{% url 'books:search-nav' 'fab' %}'> Fable </a> </div>
        <div class='mx-1 col-1'> <a class='text-light' href='{% url 'books:search-nav' 'ft' %}'> Fairy Tail </a> </div>
        <div class='mx-1 col-1'> <a class='text-light' href='{% url 'books:search-nav' 'fant' %}'> Fantasy </a> </div>
        <div class='mx-1 col-1'> <a class='text-light' href='{% url 'books:search-nav' 'fic' %}'> Fiction </a> </div>
        <div class='mx-1 col-1'> <a class='text-light' href='{% url 'books:search-nav' 'folk' %}'> Folkore </a> </div>
        <div class='mx-1 col-1 '> <a class='text-light' href='{% url 'books:search-nav' 'hfic' %}'> H fiction
            </a> </div>
        <div class='mx-1 col-1'> <a class='text-light' href='{% url 'books:search-nav' 'hor' %}'> Horror </a> </div>
        <div class='mx-1 col-1'> <a class='text-light' href='{% url 'books:search-nav' 'leg' %}'> Legend </a> </div>
        <div class='mx-1 col-1'> <a class='text-light' href='{% url 'books:search-nav' 'mystery' %}'> Mystery </a>
        </div>
        <div class='mx-1 col-1'> <a class='text-light' href='{% url 'books:search-nav' 'poe' %}'> Poetry </a> </div>
        <div class='mx-1 col-1'> <a class='text-light' href='{% url 'books:search-nav' 'myth' %}'> Mythology </a> </div>
        <div class='mx-1 col-1'> <a class='text-light' href='{% url 'books:search-nav' 'romance' %}'> Romancd </a>
        </div>
        <div class='mx-1 col-1'> <a class='text-light' href='{% url 'books:search-nav' 'sat' %}'> Satire </a> </div>
        <div class='mx-1 col-1'> <a class='text-light' href='{% url 'books:search-nav' 'shortstory' %}'> Shortstory </a>
        </div>
        <div class='mx-1 col-1'> <a class='text-light' href='{% url 'books:search-nav' 'swb' %}'> Swashbuckler </a>
        </div>
        <div class='mx-1 col-1'> <a class='text-light' href='{% url 'books:search-nav' 'thr' %}'> Thriller </a> </div>
        <div class='mx-1 col-1'> <a class='text-light' href='{% url 'books:search-nav' 'trv' %}'> Travel </a> </div>
        <div class='mx-1 col-1'> <a class='text-light' href='{% url 'books:search-nav' 'west' %}'> Western </a> </div>
        <div class='mx-1 col-1'> <a class='text-light' href='{% url 'books:search-nav' 'sfic' %}'> S Fiction </a>
        </div>
        <div class='mx-1 col-1'> <a class='text-light' href='{% url 'books:search-nav' 'rfic' %}'> R Fiction
            </a> </div>
        <div class='mx-1 col-1'> <a class='text-light' href='{% url 'books:search-nav' 'hum' %}'> Humor </a> </div>
        <div class='mx-1 col-1'> <a class='text-light' href='{% url 'books:search-nav' 'bio' %}'> Biography </a> </div>
        <div class='mx-1 col-1'> <a class='text-light' href='{% url 'books:search-nav' 'ess' %}'> Essay </a> </div>
        <div class='mx-1 col-1'> <a class='text-light' href='{% url 'books:search-nav' 'journalism' %}'> Journalism </a>
        </div>
        <div class='mx-1 col-1'> <a class='text-light' href='{% url 'books:search-nav' 'memoire' %}'> Memoir </a> </div>
        <div class='mx-1 col-1'> <a class='text-light' href='{% url 'books:search-nav' 'nnf' %}'> Nn fiction
            </a> </div>
        <div class='mx-1 col-1'> <a class='text-light' href='{% url 'books:search-nav' 'refbook' %}'> Ref Book
            </a> </div>
        <div class='mx-1 col-1'> <a class='text-light' href='{% url 'books:search-nav' 'selfhbook' %}'> Sh Book
            </a> </div>
        <div class='mx-1 col-1'> <a class='text-light' href='{% url 'books:search-nav' 'speech' %}'> Speech </a> </div>
        <div class='mx-1 col-1'> <a class='text-light' href='{% url 'books:search-nav' 'textbook' %}'> textbook </a>
        </div>
        <div class='mx-1 col-1'> <a class='text-light' href='{% url 'books:search-nav' 'comics' %}'> Comics </a> </div>
        <div class='mx-1 col-1'> <a class='text-light' href='{% url 'books:search-nav' 'bd' %}'> Bd </a> </div>
        <div class='mx-1 col-1'> <a class='text-light' href='{% url 'books:search-nav' 'mangas' %}'> Mangas </a> </div>

    </div>


    <div style="margin-top:1%;margin-bottom : 5%;" class="">

        <div class="row w-100">





            <div style="width : 70%;margin-left: 2% ;" class="row border border-secondary col-8">


                {% for book in page_obj %}



                <div class="col-3 ">
                    <div class="card my-2" style="width:180px">
                        <a href="{% url 'books:detail-books' book.ID%}">
                            <img style="width:180px;height:300px" src="{{book.cover.url}}" class="mx-auto" alt="">
                            <div class="card-body">
                                <h5 class="card-title">{{book.title}}</h5>


                                {% for poster in book.original_poster.all%}


                                <a href="{%url 'users:public_profile' poster.ID%}"> {{poster.username}}
                                </a>

                                {% endfor %}





                                <p class=" card-text">Genre : {{book.get_genre_display}} <br> Posted :
                                    {{book.pub_date|date:"SHORT_DATE_FORMAT"}}
                                </p>
                                {% if book.price == 0 %}
                                <a href="#" style="background:#00c972" class="btn text-light">

                                    Free </a>
                                {% else %}

                                <a href="#" class="btn btn-primary">

                                    {{book.price}} â‚¬ </a>
                                {% endif %}
                            </div>
                        </a>
                    </div>

                </div>

                {%endfor%}

            </div>


            <div style="margin-left:5%; height : 20%" class="row border border-secondary col-3 bg-dark ">

                <h2 class="text-light text-center mx-auto">LAST PARUTIONS</h2>

                <div id="carouselExampleCaptions" class="carousel slide p-2 mx-auto w-75" data-ride="carousel">
                    <ol class="carousel-indicators">
                        <li data-target="#carouselExampleCaptions" data-slide-to="0" class="active"></li>
                        <li data-target="#carouselExampleCaptions" data-slide-to="1"></li>
                        <li data-target="#carouselExampleCaptions" data-slide-to="2"></li>
                        <li data-target="#carouselExampleCaptions" data-slide-to="3"></li>
                        <li data-target="#carouselExampleCaptions" data-slide-to="4"></li>
                        <li data-target="#carouselExampleCaptions" data-slide-to="5"></li>
                    </ol>
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img style="width:180px;height:300px" src="{% static 'images/default_cover.jpg' %}"
                                class="d-block w-100" alt="...">
                            <div class="carousel-caption d-none d-md-block">
                                <h3 class="font-weight-bolder text-light"> LAST PARUTIONS</h5>
                                    <p>-</p>
                            </div>
                        </div>

                        {% for book in side_list %}

                        <div class="carousel-item">
                            <a href="{% url 'books:detail-books' book.ID%}">
                                <img style="width:180px;height:300px" src="{{book.cover.url}}" class="d-block w-100"
                                    alt="...">
                            </a>
                            <div class="carousel-caption d-none d-md-block">
                                <div style="background:rgba(235,240,228,0.5)" class="">

                                    <h5 class="text-dark">{{book.title}}</h5>
                                    <p class="text-dark">{{book.get_genre_display}}</p>
                                </div>

                            </div>
                        </div>


                        {%endfor%}
                    </div>
                    <a class="carousel-control-prev" href="#carouselExampleCaptions" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#carouselExampleCaptions" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
            </div>




        </div>
    </div>
</div>









<div class="text-center mb-3">

    {% if page_obj.has_previous %}


    <a class="text-primary text-decoration-none" href="?page=1">
        <i class="fas fa-angle-double-left fa-lg "></i>

    </a>
    <a class="text-primary  text-decoration-none" href="?page= {{ page_obj.previous_page_number}}">
        <i class="fas fa-angle-left fa-lg"></i>
    </a>


    {% endif %}

    {% for num in page_obj.paginator.page_range %}

    {% if page_obj.number == num%}

    <a style="font-size:22px" class="text-primary font-weight-bold mx-1" href="?page={{ num }}">{{ num }}</a>

    {% elif num > page_obj.number|add:"-3" and num < page_obj.number|add:"3" %}


    <a style=" font-size:22px " class="  text-secondary mx-1" href="?page={{ num }}">{{ num }}</a>




    {% endif %}

    {% endfor %}

    {% if page_obj.has_next %}

    <a class=" text-primary  text-decoration-none  " href="?page={{page_obj.next_page_number}}">
        <i class="fas fa-angle-right fa-lg"></i>
    </a>
    <a class=" text-primary text-decoration-none  " href="?page= {{ page_obj.paginator.num_pages}}">


        <i class="fas fa-angle-double-right fa-lg"></i>

    </a>


    {% endif %}

</div>

{%endblock content%}