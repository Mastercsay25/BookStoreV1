{% extends "book_store/basic.html" %}

{% block title %} Listing {% endblock %}



{% load static %}



{% block content%}




{% if messages %}

{% for message in messages %}
<div{% if message.tags %} class="alert-info p-1 m-2" {% endif %}>{{ message }} <a href="{%url 'books:user-cart'%}"><i
            class="fas fa-shopping-cart"></i>

    </a></div>
    {% endfor %}
    </ul>
    {% endif %}


    <div class=" filter-bar w-100 mx-auto d-block d-md-flex flex-row w-100 justify-content-center">


        <div class="btn-group ">
            <button type="button" class=" btn btn-bar dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false">
                Fictional Genres
            </button>
            <div class="dropdown-menu">
                <a class='text-dark dropdown-item' href='{% url 'books:search-nav' 'nov' %}'> Novel </a>
                <a class='text-dark dropdown-item' href='{% url 'books:search-nav' 'cla' %}'> Classic </a>
                <a class='text-dark dropdown-item' href='{% url 'books:search-nav' 'dra' %}'> Drama </a>
                <a class='text-dark dropdown-item' href='{% url 'books:search-nav' 'fab' %}'> Fable </a>
                <a class='text-dark dropdown-item' href='{% url 'books:search-nav' 'ft' %}'> Fairy Tail </a>

                <a class='text-dark dropdown-item' href='{% url 'books:search-nav' 'fant' %}'> Fantasy </a>
                <a class='text-dark dropdown-item' href='{% url 'books:search-nav' 'fic' %}'> Fiction </a>

                <a class='text-dark dropdown-item' href='{% url 'books:search-nav' 'folk' %}'> Folkore </a>
                <a class='text-dark dropdown-item' href='{% url 'books:search-nav' 'hfic' %}'> H fiction
                </a>
                <a class='text-dark dropdown-item' href='{% url 'books:search-nav' 'hor' %}'> Horror </a>
                <a class='text-dark dropdown-item' href='{% url 'books:search-nav' 'leg' %}'> Legend </a>
                <a class='text-dark dropdown-item' href='{% url 'books:search-nav' 'mystery' %}'> Mystery </a>
                <a class='text-dark dropdown-item' href='{% url 'books:search-nav' 'poe' %}'> Poetry </a>
                <a class='text-dark dropdown-item' href='{% url 'books:search-nav' 'myth' %}'> Mythology </a>
                <a class='text-dark dropdown-item' href='{% url 'books:search-nav' 'romance' %}'> Romance </a>

                <a class='text-dark dropdown-item' href='{% url 'books:search-nav' 'sat' %}'> Satire </a>
                <a class='text-dark dropdown-item' href='{% url 'books:search-nav' 'shortstory' %}'> Shortstory </a>

                <a class='text-dark dropdown-item' href='{% url 'books:search-nav' 'swb' %}'> Swashbuckler </a>

                <a class='text-dark dropdown-item' href='{% url 'books:search-nav' 'thr' %}'> Thriller </a>
                <a class='text-dark dropdown-item' href='{% url 'books:search-nav' 'trv' %}'> Travel </a>
                <a class='text-dark dropdown-item' href='{% url 'books:search-nav' 'west' %}'> Western </a>
                <a class='text-dark dropdown-item' href='{% url 'books:search-nav' 'sfic' %}'> S Fiction </a>
                <a class='text-dark dropdown-item' href='{% url 'books:search-nav' 'rfic' %}'> R Fiction
                </a>

            </div>
        </div>



        <div class="btn-group ">
            <button type="button" class="btn btn-bar dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false">
                Non-Fictional Books
            </button>
            <div class="dropdown-menu">

                <a class='text-dark dropdown-item' href='{% url 'books:search-nav' 'hum' %}'> Humor </a>
                <a class='text-dark dropdown-item' href='{% url 'books:search-nav' 'bio' %}'> Biography </a>
                <a class='text-dark dropdown-item' href='{% url 'books:search-nav' 'ess' %}'> Essay </a>
                <a class='text-dark dropdown-item' href='{% url 'books:search-nav' 'journalism' %}'> Journalism </a>

                <a class='text-dark dropdown-item' href='{% url 'books:search-nav' 'memoire' %}'> Memoir </a>
                <a class='text-dark dropdown-item' href='{% url 'books:search-nav' 'nnf' %}'> Nn fiction
                </a>
                <a class='text-dark dropdown-item' href='{% url 'books:search-nav' 'refbook' %}'> Ref Book
                </a>
                <a class='text-dark dropdown-item' href='{% url 'books:search-nav' 'selfhbook' %}'> Sh Book
                </a>
                <a class='text-dark dropdown-item' href='{% url 'books:search-nav' 'speech' %}'> Speech </a>
                <a class='text-dark dropdown-item' href='{% url 'books:search-nav' 'textbook' %}'> textbook </a>



            </div>
        </div>


        <div class="btn-group ">
            <button type="button" class="btn btn-bar dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false">
                Image-books
            </button>
            <div class="dropdown-menu">
                <a class='text-dark dropdown-item' href='{% url 'books:search-nav' 'comics' %}'> Comics </a>
                <a class='text-dark dropdown-item' href='{% url 'books:search-nav' 'bd' %}'> Bd </a>
                <a class='text-dark dropdown-item' href='{% url 'books:search-nav' 'mangas' %}'> Mangas </a>
            </div>
        </div>









    </div>





    <form class="form-inline" action="{% url 'books:index-search' %}" method="get">
        {% csrf_token %}


        <div class="search-bar-div p-4">



            <div class="SearchBox ">

                <button style="height:30px;background-color:#D6E5E3" type="submit"
                    class="btn border-0 text-info  d-none d-md-inline p-0 mr-2"> <i class="fas fa-search ">
                    </i>
                </button>

                <select style=""
                    class="border-0 bg-light search-target-input-md search-style rounded px-2 search-target-input-md-size"
                    name="searchtarget" id="Search_Target">

                    <option value="title">

                        title


                    </option>


                    <option value="author">

                        author


                    </option>



                </select>


                <input class="text-secondary search-text-input search-text-input-md border-0 search-style rounded px-2"
                    name="search" type="text" id="Search_Id" placeholder="Search a Book">



            </div>
        </div>
    </form>






    <div style="margin-top:1%;margin-bottom : 5%;" class="">

        <div class="row w-100">





            <div style="margin-left: 5%;" class="row w-100 col-md-8 order-2 order-md-1  ">





                <h3 class="mx-auto"> All books </h3>
                <div class="row w-100 ">

                    {% for book in page_obj %}

                    <div class=" col-12 col-sm-6d col-md-4 col-lg-3 py-2">

                        <div class="card h-100 text-dark border-0 shadow-lg ">

                            <div class="card-body">
                                <a href="{% url 'books:detail-books' book.ID%}">
                                    <h5 class="card-title overflow text-dark"> {{book.title}}</h5>
                                </a>




                                {% for poster in book.original_poster.all%}


                                <a class="overflow" href="{%url 'users:public_profile' poster.ID%}">
                                    {{poster.username}}
                                </a>

                                {% endfor %}
                                <a href="{% url 'books:detail-books' book.ID%}">
                                    <img src="{{book.cover.url}}" class="card-img-top img-fluid" alt=""></a>
                                {% if book.is_free %}


                                <p style="color:#43B14B" class="mt-1 font-weight-bold "> Free </p>
                                {% else %}


                                <p class="mt-1 font-weight-bold">{{book.price}} â‚¬</p>

                                {% endif %}

                                <p class=" card-text card-footer text-muted ">Genre : {{book.get_genre_display}}
                                    <br>
                                    Posted :
                                    <span class="card-date">{{book.pub_date|date:"SHORT_DATE_FORMAT"}}</span>
                                </p>
                            </div>

                        </div>

                    </div>

                    {%endfor%}
                </div>



            </div>



            <div style="margin-left:2%" class="row w-100 col-md-3 order-1 order-md-2 h-25 ">



                <div id="carouselExampleCaptions" class="carousel slide p-2 mx-auto w-75" data-ride="carousel">
                    <h3 class="text-dark text-center mx-auto">Last parutions</h3>
                    <ol class="carousel-indicators">
                        <li data-target="#carouselExampleCaptions" data-slide-to="0" class="active"></li>
                        <li data-target="#carouselExampleCaptions" data-slide-to="1"></li>
                        <li data-target="#carouselExampleCaptions" data-slide-to="2"></li>
                        <li data-target="#carouselExampleCaptions" data-slide-to="3"></li>
                        <li data-target="#carouselExampleCaptions" data-slide-to="4"></li>
                        <li data-target="#carouselExampleCaptions" data-slide-to="5"></li>
                    </ol>
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img style="width:180px;height:300px" src="{% static 'images/default_cover.jpg' %}"
                                class="d-block w-100" alt="...">
                            <div class="carousel-caption d-none d-md-block">
                                <h3 class="font-weight-bolder text-light"> LAST PARUTIONS</h5>
                                    <p>-</p>
                            </div>
                        </div>

                        {% for book in side_list %}

                        <div class="carousel-item">
                            <a href="{% url 'books:detail-books' book.ID%}">
                                <img style="width:180px;height:300px" src="{{book.cover.url}}" class="d-block w-100"
                                    alt="...">
                            </a>
                            <div class="carousel-caption d-none d-md-block">
                                <div style="background:rgba(235,240,228,0.5)" class="">

                                    <h5 class="text-dark">{{book.title}}</h5>
                                    <p class="text-dark">{{book.get_genre_display}}</p>
                                </div>

                            </div>
                        </div>


                        {%endfor%}
                    </div>
                    <a class="carousel-control-prev" href="#carouselExampleCaptions" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#carouselExampleCaptions" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
            </div>




        </div>
    </div>









    <div class="text-center mb-3">

        {% if page_obj.has_previous %}


        <a class="text-primary text-decoration-none" href="?page=1">
            <i class="fas fa-angle-double-left fa-lg "></i>

        </a>
        <a class="text-primary  text-decoration-none" href="?page= {{ page_obj.previous_page_number}}">
            <i class="fas fa-angle-left fa-lg"></i>
        </a>


        {% endif %}

        {% for num in page_obj.paginator.page_range %}

        {% if page_obj.number == num%}

        <a style="font-size:22px" class="text-primary font-weight-bold mx-1" href="?page={{ num }}">{{ num }}</a>

        {% elif num > page_obj.number|add:"-3" and num < page_obj.number|add:"3" %}


        <a style=" font-size:22px " class="  text-secondary mx-1" href="?page={{ num }}">{{ num }}</a>




        {% endif %}

        {% endfor %}

        {% if page_obj.has_next %}

        <a class=" text-primary  text-decoration-none  " href="?page={{page_obj.next_page_number}}">
            <i class="fas fa-angle-right fa-lg"></i>
        </a>
        <a class=" text-primary text-decoration-none  " href="?page= {{ page_obj.paginator.num_pages}}">


            <i class="fas fa-angle-double-right fa-lg"></i>

        </a>


        {% endif %}

    </div>

    {%endblock content%}